import os
import re

DEV = False

DATA_PATH = "./data/predicted/"
PC_PATH = "./data/gtc-custom-predicted.txt"
P_PATH = "./data/gtc-predicted.txt"
if DEV:
    P_PATH = "./data/gtc-predicted-small.txt"

custom_predicted = []
pretrained_predicted = []
for root, dirs, files in os.walk(DATA_PATH):
    file_nums = set()
    for file in files:
        if DEV:
            pf = ''.join(re.findall(r'predicted-small-\d+.txt', file))
        else:
            pfc = ''.join(re.findall(r'gtc-predicted-\d+.txt', file))
            pf = ''.join(re.findall(r'pretrained-predicted-\d+.txt', file))
        if pf:
            fn = int(''.join(re.findall(r'\d+', pf)))
            file_nums.add(fn)

    # c = 0
    for f_num in sorted(file_nums):
        if DEV:
            pf = f"predicted-small-{f_num}.txt"
        else:
            pfc = f"gtc-predicted-{f_num}.txt"
            pf = f"pretrained-predicted-{f_num}.txt"
        path_c = DATA_PATH + pfc
        path = DATA_PATH + pf
        with open(path_c, 'r') as f:
            lines = f.readlines()
            custom_predicted.extend(lines)
        with open(path, 'r') as f:
            lines = f.readlines()
            pretrained_predicted.extend(lines)

        # if c == 3:
        #     break
        # c += 1


with open(P_PATH, 'w+') as pf:
    pf.writelines(pretrained_predicted)
with open(PC_PATH, 'w+') as pf:
    pf.writelines(custom_predicted)
